# Copy to infra/.env and customize for your deployment.

# ----------------------------
# Postgres
# ----------------------------
FILAMENT_POSTGRES_USER=filament
FILAMENT_POSTGRES_PASSWORD=filament
FILAMENT_POSTGRES_DB=filament

# ----------------------------
# filament-server runtime
# ----------------------------
FILAMENT_RUST_LOG=info
FILAMENT_BIND_ADDR=0.0.0.0:3000
FILAMENT_MAX_CREATED_GUILDS_PER_USER=5
# Leave unset to derive from FILAMENT_POSTGRES_* and the compose postgres service.
# FILAMENT_DATABASE_URL=postgres://filament:filament@postgres:5432/filament
FILAMENT_ATTACHMENT_ROOT=/var/lib/filament/attachments
FILAMENT_LIVEKIT_API_KEY=devkey
FILAMENT_LIVEKIT_API_SECRET=devsecret
# Browser-reachable signaling URL returned by /voice/token.
# LAN example: ws://192.168.1.50:7880
# Domain example with Caddy TLS proxy: wss://chat.example.com:8443
FILAMENT_LIVEKIT_URL=ws://localhost:7880
# Optional hCaptcha server-side verification values.
FILAMENT_HCAPTCHA_SITE_KEY=
FILAMENT_HCAPTCHA_SECRET=

# ----------------------------
# LiveKit container/runtime
# ----------------------------
LIVEKIT_PORT=7880
LIVEKIT_TCP_PORT=7881
LIVEKIT_UDP_PORT=7882
# Set true for internet/public deployments where clients are not on the same LAN.
LIVEKIT_USE_EXTERNAL_IP=false
# Optional static node IP. Keep empty unless your network setup requires it.
LIVEKIT_NODE_IP=

# ----------------------------
# Reverse proxy (Caddy)
# ----------------------------
CADDY_HTTP_PORT=80
CADDY_HTTPS_PORT=443
CADDY_LIVEKIT_PROXY_PORT=8443
CADDY_LEGACY_SERVER_PORT=8080

# Space-separated host lists for Caddy site blocks.
CADDY_HTTP_REDIRECT_HOSTS=filamentapp.net app.filament.local api.filament.local
CADDY_APP_HTTPS_HOSTS=filamentapp.net app.filament.local
CADDY_API_HTTPS_HOSTS=api.filament.local

# Upstream web app (Vite dev server or static app service).
# Use `filament-web:4173` when running compose with `--profile web`.
CADDY_WEB_UPSTREAM=host.docker.internal:4173

# TLS cert paths inside the Caddy container.
CADDY_TLS_CERT_PATH=/etc/caddy/certs/cert.pem
CADDY_TLS_KEY_PATH=/etc/caddy/certs/key.pem

# ----------------------------
# Vite dev server (apps/filament-client-web)
# Export these in your shell when running `pnpm dev`, or place them in
# apps/filament-client-web/.env.local.
# ----------------------------
# VITE_DEV_SERVER_HOST=0.0.0.0
# VITE_DEV_SERVER_PORT=4173
# VITE_DEV_ALLOWED_HOSTS=localhost,127.0.0.1,filamentapp.net
# VITE_DEV_HMR_CLIENT_PORT=443
# VITE_DEV_API_PROXY_TARGET=http://localhost:8080
# VITE_DEV_GATEWAY_PROXY_TARGET=ws://localhost:8080
# Optional explicit runtime API/gateway overrides:
# VITE_FILAMENT_API_BASE_URL=/api
# VITE_FILAMENT_GATEWAY_WS_URL=
# hCaptcha site key used by the web client (public site key; not secret):
VITE_FILAMENT_HCAPTCHA_SITE_KEY=
